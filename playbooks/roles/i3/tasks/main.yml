---
- name: Install i3 and related software
  become: yes
  apt: name={{item}}
       state=present
  with_items:
    - i3
    - i3blocks
    - compton
    - xautolock
    - unclutter
    - pasystray
    - fdpowermon
    - arandr
    - rofi
    - gnome-settings-daemon
    - feh

- name: Set i3 as autologin window manager in LightDM
  become: yes
  template: src=roles/i3/files/12-autologin.conf
            dest=/etc/lightdm/lightdm.conf.d/12-autologin.conf

- name: Grant no-password sudo privileges to necessary commands
  become: yes
  lineinfile: dest=/etc/sudoers
              line={{item}}
  with_items:
    - "{{ansible_env.USER}} ALL=(ALL:ALL) NOPASSWD: /sbin/reboot"
    - "{{ansible_env.USER}} ALL=(ALL:ALL) NOPASSWD: /sbin/poweroff"
    - "{{ansible_env.USER}} ALL=(ALL:ALL) NOPASSWD: /usr/bin/setpci"

- name: Install i3 python library
  become: yes
  pip: name=i3-py
       state=present
