---
- name: Install tilix
  become: yes
  dnf:
    name: tilix

- name: Configure tilix
  shell: "dconf load /com/gexperts/Tilix/ < {{ role_path }}/files/tilix.conf"

- name: Configure ddterm
  shell: "dconf load /com/github/amezin/ddterm/ < {{ role_path }}/files/ddterm.conf"

- name: Install zsh
  become: yes
  dnf:
    name: zsh

- name: Configure default shell
  become: yes
  user:
    name: "{{ ansible_env.USER }}"
    shell: /usr/bin/zsh

- name: Set up oh-my-zsh
  git:
    repo: https://github.com/ohmyzsh/ohmyzsh.git
    dest: "{{ ansible_env.HOME }}/.oh-my-zsh"

- name: Clone powerlevel10k theme
  git:
    repo: https://github.com/romkatv/powerlevel10k.git
    dest: "{{ ansible_env.HOME }}/.oh-my-zsh/custom/themes/powerlevel10k"

- name: Clone zsh-users plugins
  git:
    repo: "https://github.com/zsh-users/{{ item }}.git"
    dest: "{{ ansible_env.HOME }}/.oh-my-zsh/custom/plugins/{{ item }}"
  with_items:
    - zsh-completions
    - zsh-syntax-highlighting
    - zsh-history-substring-search

- name: Create color schemes directory
  file:
    path: "{{ ansible_env.HOME }}/.config/tilix/schemes"
    state: directory

- name: Copy Dracula color scheme
  copy:
    src: files/Dracula.json
    dest: "{{ ansible_env.HOME }}/.config/tilix/schemes/Dracula.json"
