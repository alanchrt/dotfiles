setopt histignorealldups sharehistory

# Use emacs keybindings
bindkey -e

# Add local bin path to PATH
export PATH="$PATH:$HOME/.local/bin"

# Enable powerlevel10k
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
    source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

setopt histignorealldups sharehistory
# Use oh-my-zsh
export ZSH=$HOME/.oh-my-zsh
export ZSH_THEME="powerlevel10k/powerlevel10k"
plugins=(zsh-syntax-highlighting zsh-completions zsh-history-substring-search)
source $ZSH/oh-my-zsh.sh

# Keep 1000 lines of history within the shell and save it to ~/.zsh_history:
HISTSIZE=1000
SAVEHIST=1000
HISTFILE=~/.zsh_history

# Use modern completion system
skip_global_compinit=1
autoload -Uz compinit
# for some reason, specifying a different zcompdump makes this faster
compinit -d ~/.zcompdump_completion
zstyle ':completion:*' menu select=2

# Bind history substring search
bindkey -M emacs '^P' history-substring-search-up
bindkey -M emacs '^N' history-substring-search-down

# Set up fnm
eval "$(fnm env)"

# Set up vte for tilix
if [ $TILIX_ID ] || [ $VTE_VERSION ]; then
    source /etc/profile.d/vte.sh
fi

# Configure powerlevel10k
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

# Include bash aliases
if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi
